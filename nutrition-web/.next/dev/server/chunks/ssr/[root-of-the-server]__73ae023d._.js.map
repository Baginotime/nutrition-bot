{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/NutritionApp/nutrition-web/app/page.tsx"],"sourcesContent":["// app/page.tsx\n'use client';\n\nimport { useState } from 'react';\n\ntype ActivityLevel = 'low' | 'medium' | 'high';\n\nfunction calcCalories(\n  sex: 'male' | 'female',\n  age: number,\n  height: number,\n  weight: number,\n  activity: ActivityLevel\n) {\n  // Mifflin-St Jeor\n  const s = sex === 'male' ? 5 : -161;\n  const bmr = 10 * weight + 6.25 * height - 5 * age + s;\n\n  const k = activity === 'low' ? 1.2 : activity === 'medium' ? 1.45 : 1.7;\n  const calories = Math.round(bmr * k);\n\n  // БЖУ условно: 30/30/40\n  const protein = Math.round((calories * 0.3) / 4);\n  const fat = Math.round((calories * 0.3) / 9);\n  const carbs = Math.round((calories * 0.4) / 4);\n\n  return { calories, protein, fat, carbs };\n}\n\nexport default function HomePage() {\n  const [age, setAge] = useState(25);\n  const [gender, setGender] = useState<'male' | 'female'>('male');\n  const [height, setHeight] = useState(175);\n  const [weight, setWeight] = useState(70);\n  const [activity, setActivity] = useState<ActivityLevel>('medium');\n\n  const [result, setResult] = useState<{\n    calories: number;\n    protein: number;\n    fat: number;\n    carbs: number;\n  } | null>(null);\n\n  const [savingError, setSavingError] = useState<string | null>(null);\n\n  async function handleSubmit(e: React.FormEvent) {\n    e.preventDefault();\n    setSavingError(null);\n\n    const calc = calcCalories(gender, age, height, weight, activity);\n    setResult(calc);\n\n    // тут подставь реальные данные из Telegram, когда подключим бота\n    const payload = {\n      telegram_id: 'test-123',\n      username: 'test_user',\n      first_name: 'Test',\n      age,\n      gender,\n      height,\n      weight,\n      activity_level: activity,\n      calories: calc.calories,\n      protein: calc.protein,\n      fat: calc.fat,\n      carbs: calc.carbs,\n    };\n\n    try {\n      const res = await fetch('/api/save-profile', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await res.json();\n\n      if (!res.ok || !data.ok) {\n        console.error('API error:', data);\n        setSavingError(data.error || 'Не получилось сохранить данные.');\n      }\n    } catch (err: any) {\n      console.error('fetch error:', err);\n      setSavingError('Ошибка сети при сохранении данных.');\n    }\n  }\n\n  const calc = result ?? calcCalories(gender, age, height, weight, activity);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-[#f7f4ef]\">\n      <div className=\"max-w-3xl w-full bg-white rounded-3xl shadow-xl p-10\">\n        <h2 className=\"text-center text-sm tracking-[0.3em] text-gray-400 mb-3\">\n          ТВОЙ ДНЕВНИК ПИТАНИЯ\n        </h2>\n        <h1 className=\"text-center text-3xl font-semibold mb-8\">\n          Считаем, сколько калорий нужно\n          <br />в день\n        </h1>\n\n        <form onSubmit={handleSubmit} className=\"grid grid-cols-2 gap-4 mb-8\">\n          <label className=\"flex flex-col text-sm\">\n            Возраст\n            <input\n              type=\"number\"\n              value={age}\n              onChange={(e) => setAge(Number(e.target.value))}\n              className=\"mt-1 rounded-xl border px-3 py-2\"\n            />\n          </label>\n\n          <label className=\"flex flex-col text-sm\">\n            Пол\n            <select\n              value={gender}\n              onChange={(e) => setGender(e.target.value as 'male' | 'female')}\n              className=\"mt-1 rounded-xl border px-3 py-2\"\n            >\n              <option value=\"male\">Мужской</option>\n              <option value=\"female\">Женский</option>\n            </select>\n          </label>\n\n          <label className=\"flex flex-col text-sm\">\n            Рост (см)\n            <input\n              type=\"number\"\n              value={height}\n              onChange={(e) => setHeight(Number(e.target.value))}\n              className=\"mt-1 rounded-xl border px-3 py-2\"\n            />\n          </label>\n\n          <label className=\"flex flex-col text-sm\">\n            Вес (кг)\n            <input\n              type=\"number\"\n              value={weight}\n              onChange={(e) => setWeight(Number(e.target.value))}\n              className=\"mt-1 rounded-xl border px-3 py-2\"\n            />\n          </label>\n\n          <label className=\"flex flex-col text-sm col-span-2\">\n            Активность\n            <select\n              value={activity}\n              onChange={(e) => setActivity(e.target.value as ActivityLevel)}\n              className=\"mt-1 rounded-xl border px-3 py-2\"\n            >\n              <option value=\"low\">Минимальная (офис, мало шагов)</option>\n              <option value=\"medium\">Умеренная (тренировки 2–3 раза)</option>\n              <option value=\"high\">Высокая (спорт почти каждый день)</option>\n            </select>\n          </label>\n\n          <button\n            type=\"submit\"\n            className=\"col-span-2 mt-2 bg-black text-white rounded-full py-3 text-sm font-semibold\"\n          >\n            Посчитать и сохранить\n          </button>\n        </form>\n\n        <div className=\"bg-[#faf7f2] rounded-3xl p-6 mb-4\">\n          <p className=\"text-center text-sm text-gray-500 mb-4\">\n            Твоя норма в день\n          </p>\n          <div className=\"grid grid-cols-4 gap-4 text-center\">\n            <MacroCard label=\"Калории\" value={calc.calories} unit=\"ккал\" />\n            <MacroCard label=\"Белки\" value={calc.protein} unit=\"г\" />\n            <MacroCard label=\"Жиры\" value={calc.fat} unit=\"г\" />\n            <MacroCard label=\"Углеводы\" value={calc.carbs} unit=\"г\" />\n          </div>\n        </div>\n\n        {savingError && (\n          <p className=\"text-center text-sm text-red-500\">\n            {savingError}\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction MacroCard({\n  label,\n  value,\n  unit,\n}: {\n  label: string;\n  value: number;\n  unit: string;\n}) {\n  return (\n    <div className=\"bg-white rounded-2xl shadow-sm py-4\">\n      <div className=\"text-xs text-gray-500 mb-1\">{label}</div>\n      <div className=\"text-xl font-semibold\">\n        {value} <span className=\"text-sm text-gray-500\">{unit}</span>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 398, "column": 0}, "map": {"version":3,"sources":["file:///C:/NutritionApp/nutrition-web/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,QAAQ;;KAElC;IACL,IAAIF,QAAQC,GAAG,CAACK,yBAAyB,EAAE;;SAcpC;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;QAGT,OAAO;;IAOT;AACF","ignoreList":[0]}},
    {"offset": {"line": 417, "column": 0}, "map": {"version":3,"sources":["file:///C:/NutritionApp/nutrition-web/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}},
    {"offset": {"line": 422, "column": 0}, "map": {"version":3,"sources":["file:///C:/NutritionApp/nutrition-web/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n"],"names":["module","exports","require","vendored","React"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,4HACRC,QAAQ,CAAC,YAAY,CAAEC,KAAK","ignoreList":[0]}}]
}